<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Formular mit Validierung</title>
  <style>
    .error { border-color: red; }
    .success { border-color: green; }
    .errorMessage { color: red; font-size: 0.9em; }
  </style>
</head>
<body>
  <form id="myForm" novalidate>
    <fieldset>
      <legend>Persönliche Daten</legend>

      <label for="name">Name *</label>
      <input type="text" id="name" name="name" required pattern="^[A-Za-z\s]{2,}$">
      <div class="errorMessage"></div>

      <label for="email">E-Mail *</label>
      <input type="email" id="email" name="email" required>
      <div class="errorMessage"></div>

      <label for="password">Passwort *</label>
      <input type="password" id="password" name="password" required minlength="6">
      <div class="errorMessage"></div>

      <label for="age">Alter (12-120) *</label>
      <input type="number" id="age" name="age" required min="12" max="120">
      <div class="errorMessage"></div>

      <label>Geschlecht *</label>
      <select id="gender" name="gender" required>
        <option value="">Bitte wählen</option>
        <option value="male">männlich</option>
        <option value="female">weiblich</option>
        <option value="other">divers</option>
      </select>
      <div class="errorMessage"></div>

      <label for="birthdate">Geburtsdatum *</label>
      <input type="date" id="birthdate" name="birthdate" required>
      <div class="errorMessage"></div>
    </fieldset>

    <fieldset>
      <legend>Sonstiges</legend>

      <label for="color">Lieblingsfarbe *</label>
      <input type="color" id="color" name="color" required>
      <div class="errorMessage"></div>

      <label for="website">Webseite</label>
      <input type="url" id="website" name="website" pattern="https?://.+">
      <div class="errorMessage"></div>

      <label for="message">Nachricht</label>
      <textarea id="message" name="message" maxlength="140"></textarea>
      <div class="errorMessage"></div>

      <label>Einstellungen *</label>
      <input type="checkbox" id="agb" name="agb" required>
      <label for="agb">Ich akzeptiere die AGB</label>
      <div class="errorMessage"></div>

      <label>Newsletter?</label>
      <input type="radio" id="newsletter1" name="newsletter" value="ja" required>
      <label for="newsletter1">Ja</label>
      <input type="radio" id="newsletter2" name="newsletter" value="nein">
      <label for="newsletter2">Nein</label>
      <div class="errorMessage"></div>
    </fieldset>
    <button type="submit">Absenden</button>
  </form>

  <script>
    document.getElementById('myForm').addEventListener('submit', function(e) {
      e.preventDefault(); // verhindert Abschicken

      let form = e.target;
      let valid = true;

      // Hilfsfunktion für Fehlermeldungen
      function setError(input, message) {
        input.classList.add('error');
        input.classList.remove('success');
        input.nextElementSibling.textContent = message;
        valid = false;
      }
      function setSuccess(input) {
        input.classList.remove('error');
        input.classList.add('success');
        input.nextElementSibling.textContent = '';
      }

      // Name prüfen
      const name = form.name;
      if (!name.value.trim()) setError(name, "Name ist erforderlich.");
      else if (!name.value.match(/^[A-Za-z\s]{2,}$/)) setError(name, "Nur Buchstaben, mind. 2 Zeichen.");
      else setSuccess(name);

      // E-Mail prüfen
      const email = form.email;
      if (!email.value.trim()) setError(email, "E-Mail ist erforderlich.");
      else if (!email.validity.valid) setError(email, "Bitte gültige E-Mail-Adresse.");
      else setSuccess(email);

      // Passwort prüfen
      const password = form.password;
      if (!password.value.trim()) setError(password, "Passwort ist erforderlich.");
      else if (password.value.length < 6) setError(password, "Mindestens 6 Zeichen.");
      else setSuccess(password);

      // Alter prüfen
      const age = form.age;
      if (!age.value) setError(age, "Alter ist erforderlich.");
      else if (age.value < 12 || age.value > 120) setError(age, "Zwischen 12 und 120.");
      else setSuccess(age);

      // Geschlecht prüfen
      const gender = form.gender;
      if (!gender.value) setError(gender, "Bitte Geschlecht wählen.");
      else setSuccess(gender);

      // Geburtsdatum prüfen
      const birthdate = form.birthdate;
      if (!birthdate.value) setError(birthdate, "Geburtsdatum ist erforderlich.");
      else setSuccess(birthdate);

      // Farbe prüfen
      const color = form.color;
      if (!color.value) setError(color, "Lieblingsfarbe ist erforderlich.");
      else setSuccess(color);

      // Webseite prüfen (optional)
      const website = form.website;
      if (website.value && !website.value.match(/^https?:\/\/.+/))
        setError(website, "Gültige URL (http/https) erforderlich.");
      else setSuccess(website);

      // Nachricht prüfen (optional)
      const message = form.message;
      if (message.value.length > 140)
        setError(message, "Maximal 140 Zeichen.");
      else setSuccess(message);

      // AGB prüfen
      const agb = form.agb;
      if (!agb.checked) setError(agb, "AGB müssen akzeptiert werden.");
      else setSuccess(agb);

      // Newsletter prüfen
      const newsletter = form.newsletter;
      if (!form.querySelector('input[name="newsletter"]:checked'))
        setError(newsletter, "Bitte Newsletter wählen.");
      else setSuccess(newsletter);

      if (valid) form.submit();
    });
  </script>

<script src="main.js"></script>

</body>
</html>